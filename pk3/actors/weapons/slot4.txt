ACTOR SMGClip : Ammo
{
	Inventory.MaxAmount 32
	Ammo.BackpackAmount 0
}

ACTOR CHCSMG : CashWeapon
{
	Weapon.AmmoType1 "SMGClip"
	Weapon.AmmoUse1 1
	Weapon.AmmoGive1 0
	Weapon.AmmoType2 "PistolAmmo"
	Weapon.AmmoUse2 0
	Weapon.AmmoGive2 0
	Weapon.SlotNumber 4
	AttackSound "weapons/tmpfire"
	+Weapon.Ammo_Optional
	+Weapon.NoAutoFire
	States
	{
	Select:
		TECG A 1 A_Raise
		Loop
	Deselect:
		TECG A 1 A_Lower
		Loop
	Ready:
		TECG A 1 A_WeaponReady(WRF_ALLOWRELOAD)
		Loop
	Fire:
		TECG A 0 A_JumpIfNoAmmo("Dryfire")
		TECG B 0 A_GunFlash
		TECG B 0 A_AlertMonsters
		TECG B 1 BRIGHT A_FireBullets(5, 3, -1, 6, "BulletPuff", 1)
		TECG C 0 A_SetPitch(pitch - 0.9)
		TECG C 1 Offset(10,38)
		TECG A 1 Offset(11,39) A_Refire
		TECG A 1 Offset(11,40) A_WeaponReady(WRF_NOBOB)
		TECG A 1 Offset(10,39) A_WeaponReady(WRF_NOBOB)
		TECG A 1 Offset(8,38) A_WeaponReady(WRF_NOBOB)
		TECG A 1 Offset(6,36) A_WeaponReady(WRF_NOBOB)
		TECG A 1 Offset(3,34) A_WeaponReady(WRF_NOBOB)
		TECG A 1 Offset(1,33) A_WeaponReady(WRF_NOBOB)
		TECG A 1 Offset(-1,31) A_WeaponReady(WRF_NOBOB)
		Goto Ready
	Dryfire:
		TECG A 1 A_PlaySound("weapons/dryfire")
		Goto Ready
	Reload:
		TECG A 0 A_JumpIfInventory("SMGClip", 32, 2)
		TECG A 0 A_JumpIfInventory("PistolAmmo", 1, 2)
		TECG A 1 A_WeaponReady(WRF_NOFIRE)
		Goto Ready
		TECR A 1 Offset(-1,32)
		TECR A 1 Offset(-2,32)
		TECR A 1 Offset(-4,33)
		TECR A 1 Offset(-6,34)
		TECR B 1 Offset(-7,36)
		TECR C 1 Offset(-8,37)
		TECR D 1 Offset(-8,38)
		TECR E 1 Offset(-8,39)
		TECR F 1 Offset(-8,41)
		TECR F 1 Offset(-8,42)
		TECR F 1 Offset(-7,41)
		TECR F 1 Offset(-5,39)
		TECR G 1 Offset(-3,36) A_PlayWeaponSound("weapons/tmpout")
		TECR G 1 Offset(-3,35)
		TECR H 1 Offset(-2,34)
		TECR H 1 Offset(-1,33)
		TECR I 1 Offset(1,32)
		TECR I 1 Offset(1,31)
		TECR I 1 Offset(1,30)
		TECR I 1 Offset(2,29)
		TECR I 1 Offset(3,30)
		TECR I 1 Offset(3,31)
		TECR I 1 Offset(4,32)
		TECR I 1 Offset(4,33)
		TECR I 1 Offset(3,34)
		TECR I 1 Offset(3,35)
		TECR I 1 Offset(2,36)
		TECR I 1 Offset(2,37)
		TECR I 1 Offset(1,38)
		TECR I 1 Offset(1,39)
		TECR J 1 Offset(1,40)
		TECR K 1 Offset(-1,41)
	ReloadWork:
		ASDS A 0
		ASDS A 0 A_TakeInventory("PistolAmmo",1)
		ASDS A 0 A_GiveInventory("SMGClip",1)
		ASDS A 0 A_JumpIfInventory("SMGClip",32,"ReloadFinish")
		ASDS A 0 A_JumpIfInventory("PistolAmmo",1,"ReloadWork")
	ReloadFinish:
		TECR L 1 Offset(-2,42) A_PlayWeaponSound("weapons/tmpin")
		TECR L 1 Offset(-3,43)
		TECR L 1 Offset(-4,44)
		TECR L 1 Offset(-3,43)
		TECR L 1 Offset(-2,42)
		TECR L 1 Offset(-1,41)
		TECR L 1 Offset(1,40)
		TECR L 1 Offset(1,39)
		TECR L 1 Offset(2,38)
		TECR M 1 Offset(3,37)
		TECR N 1 Offset(4,36)
		TECR O 1 Offset(5,35)
		TECR P 1 Offset(6,34)
		TECR Q 1 Offset(7,33)
		TECR R 1 Offset(9,35) A_PlayWeaponSound("weapons/tmppull")
		TECR S 1 Offset(12,38)
		TECR T 1 Offset(15,41)
		TECR U 1 Offset(17,43)
		TECR V 1 Offset(18,44)
		TECR W 1 Offset(19,45)
		TECG A 1 Offset(17,43)
		TECG A 1 Offset(14,40)
		TECG A 1 Offset(10,37)
		TECG A 1 Offset(6,35)
		TECG A 1 Offset(3,34)
		TECG A 1 Offset(1,33)
		Goto Ready
	}
}

ACTOR PugRifleClip : Ammo
{
	Inventory.MaxAmount 30
	Ammo.BackpackAmount 0
	Inventory.Icon ASDSP0
}

ACTOR PugFireSeq : Inventory{}

ACTOR PugRifle : CashWeapon
{
	Weapon.SelectionOrder 400
	Weapon.AmmoType1 "PugRifleClip"
	Weapon.AmmoUse1 1
	Weapon.AmmoGive1 0
	Weapon.AmmoType2 "LightRifleAmmo"
	Weapon.AmmoUse2 0
	Weapon.AmmoGive2 0
	Weapon.Kickback 40
	Weapon.SlotNumber 4
	AttackSound "weapons/smgfire"
	Decal BulletChip
	+Weapon.AMMO_OPTIONAL
	+Weapon.NoAutoFire
	States
	{
	Ready:
		ASDS A 1 A_WeaponReady(WRF_ALLOWRELOAD)
		Loop
	Deselect:
		ASDS A 1 A_Lower
		Loop
	Select:
		ASDS A 1 A_Raise
		Loop
	Fire:
		ASDS A 0 A_JumpIfNoAmmo("DryFire")
		ASDF A 0 A_GunFlash
		TECG C 0 A_SetPitch(pitch - 0.3)
		ASDF B 1 BRIGHT A_FireBullets(3,3,1,10,"BulletPuff",1)
		TECG C 0 A_SetPitch(pitch - 0.5)
		ASDF A 1 BRIGHT A_AlertMonsters
		TECG C 0 A_SetPitch(pitch + 0.3)
		ASDS A 0 A_JumpIfInventory("PugFireSeq", 1, "TakeFireSeq")
		ASDS A 2 A_GiveInventory("PugFireSeq", 1)
		Goto FireFinish
	TakeFireSeq:
		ASDS A 1 A_TakeInventory("PugFireSeq", 1)
	FireFinish:
		TECG C 0 A_SetPitch(pitch + 0.5)
		ASDS A 0 A_Refire
		Goto Ready
	DryFire:
		ASDS A 1 A_PlaySound("weapons/dryfire", 5)
		ASDS A 1
		Goto Ready
	Reload:
		ASDS A 0 A_JumpIfInventory("PugRifleClip",30,2)
		ASDS A 0 A_JumpIfInventory("LightRifleAmmo",1,"ReloadStart")
		ASDS A 1
		Goto Ready
	ReloadStart:
		ASDR AB 1
		ASDR C 1 A_PlayWeaponSound("weapons/smgback")
		ASDR DDEEE 1
		ASDR FFFGGHHII 1
		ASDR J 3 A_PlayWeaponSound("weapons/smgout")
		ASDR KLMNOP 3
	ReloadWork:
		ASDS A 0
		ASDS A 0 A_TakeInventory("LightRifleAmmo",1)
		ASDS A 0 A_GiveInventory("PugRifleClip",1)
		ASDS A 0 A_JumpIfInventory("PugRifleClip",30,"ReloadFinish")
		ASDS A 0 A_JumpIfInventory("LightRifleAmmo",1,"ReloadWork")
	ReloadFinish:
		ASDR Q 2
		ASDR R 2 A_PlayWeaponSound("weapons/smgin")
		ASDR SSSTTTTUUUVV 1
		ASDR W 4 A_PlayWeaponSound("weapons/smgfwd")
		ASDR X 3
		goto Ready
	}
}

ACTOR BattleRifleClip : Ammo
{
	Inventory.MaxAmount 10
}

ACTOR BattleRifle : CashWeapon
{
	Weapon.SlotNumber 4
	Weapon.AmmoType1 "BattleRifleClip"
	Weapon.AmmoUse1 1
	Weapon.AmmoGive1 0
	Weapon.AmmoType2 "HeavyRifleAmmo"
	Weapon.AmmoUse2 0
	Weapon.AmmoGive2 0
	Weapon.Kickback 40
	AttackSound "weapons/m14fire"
	+weapon.noautofire
	+weapon.ammo_optional
	States
	{
	Select:
		BRIF A 1 A_Raise
		Loop
	Deselect:
		BRIF A 1 A_Lower
		Loop
	Ready:
		BRIF A 1 A_WeaponReady(WRF_ALLOWRELOAD)
		Loop
	Fire:
		BRIF A 0 A_JumpIfNoAmmo("Dryfire")
		BRIF A 0 A_GunFlash
		BRIF A 0 A_AlertMonsters
		BRIF A 0 A_Recoil(0.2)
		BRIF B 1 BRIGHT A_FireBullets(0.5, 0.5, -1, 50, "BulletPuff", 1)
		BRIF C 1 BRIGHT A_SetPitch(pitch - 0.5)
		BRIF A 0 A_SetAngle(angle - 0.1)
		BRIF D 1 BRIGHT A_SetPitch(pitch - 1.0)
		BRIF A 0 A_SetAngle(angle - 0.2)
		BRIF E 1 A_SetPitch(pitch - 1.5)
		BRIF A 0 A_SetAngle(angle - 0.3)
		BRIF E 1 A_SetPitch(pitch - 0.8)
		BRIF A 0 A_SetAngle(angle - 0.2)
		BRIF E 1 A_SetPitch(pitch - 0.5)
		BRIF A 0 A_SetAngle(angle - 0.1)
		BRIF F 1 A_SetPitch(pitch + 0.5)
		BRIF A 0 A_SetAngle(angle + 0.2)
		BRIF A 1 A_SetPitch(pitch + 0.5)
		BRIF A 0 A_SetAngle(angle + 0.2)
		BRIF A 1 A_SetPitch(pitch + 0.5)
		BRIF A 0 A_SetAngle(angle + 0.1)
		Goto Ready
	Dryfire:
		BRIF A 1 A_PlaySound("weapons/dryfire", 5)
		Goto Ready
	Reload:
		BRIF A 0 A_JumpIfInventory("BattleRifleClip",10,2)
		BRIF A 0 A_JumpIfInventory("HeavyRifleAmmo",1,"ReloadStart")
		BRIF A 4
		Goto Ready
	ReloadStart:
		BRIF FEG 1
		BRIF G 1 Offset(1,33)
		BRIF G 1 Offset(3,36)
		BRIF G 1 Offset(6,39)
		BRIF G 1 Offset(9,42)
		BRIF G 1 Offset(11,46)
		BRIR A 1 Offset(12,52)
		BRIR A 1 Offset(13,55) A_PlaySound("weapons/m14out", 5)
		BRIR B 1 Offset(14,57)
		BRIR B 1 Offset(15,60)
		BRIR C 1 Offset(16,62)
		BRIR C 1 Offset(17,61)
		BRIR C 1 Offset(17,62)
		BRIR C 1 Offset(16,63)
		BRIR C 1 Offset(14,64)
		BRIR C 1 Offset(11,65)
		BRIR C 1 Offset(9,66)
		BRIR C 1 Offset(8,67)
		BRIR C 1 Offset(8,66)
		BRIR C 1 Offset(8,64)
		BRIR C 1 Offset(9,61)
		BRIR C 1 Offset(9,57)
		BRIR C 1 Offset(10,53)
		BRIR C 1 Offset(10,49)
		BRIR C 1 Offset(10,46)
		BRIR C 1 Offset(11,44)
		BRIR C 1 Offset(11,42)
		BRIR C 1 Offset(11,41) A_PlaySound("weapons/m14in", 6)
		BRIR B 1 Offset(12,40)
		BRIR B 1 Offset(13,41)
		BRIR A 1 Offset(11,43)
		BRIR A 1 Offset(9,46)
	ReloadWork:
		ASDS A 0
		ASDS A 0 A_TakeInventory("HeavyRifleAmmo",1)
		ASDS A 0 A_GiveInventory("BattleRifleClip",1)
		ASDS A 0 A_JumpIfInventory("BattleRifleClip",10,"ReloadFinish")
		ASDS A 0 A_JumpIfInventory("HeavyRifleAmmo",1,"ReloadWork")
	ReloadFinish:
		BRIF G 1 Offset(8,50)
		BRIF G 1 Offset(8,55)
		BRIF G 1 Offset(8,59)
		BRIF G 1 Offset(7,56)
		BRIF G 1 Offset(6,52)
		BRIF G 1 Offset(5,50)
		BRIF G 1 Offset(4,48)
		BRIF G 1 Offset(4,46)
		BRIF G 1 Offset(4,45)
		BRIR D 1 Offset(3,44)
		BRIR D 1 Offset(2,43)
		BRIR E 1 Offset(1,42)
		BRIR E 1 Offset(-1,41) A_PlaySound("weapons/m14back", 5)
		BRIR F 1 Offset(-4,41)
		BRIR F 1 Offset(-7,42)
		BRIR G 1 Offset(-10,43)
		BRIR G 1 Offset(-12,43) A_PlaySound("weapons/m14fwd", 6)
		BRIR H 1 Offset(-13,44)
		BRIR H 1 Offset(-14,44)
		BRIR I 1 Offset(-15,45)
		BRIR I 1 Offset(-13,44)
		BRIR J 1 Offset(-11,42)
		BRIR J 1 Offset(-8,40)
		BRIF G 1 Offset(-6,37)
		BRIF G 1 Offset(-4,35)
		BRIF E 1 Offset(-2,34)
		BRIF E 1 Offset(1,33)
		BRIF F 1 Offset(0,32)
		Goto Ready
	}
}